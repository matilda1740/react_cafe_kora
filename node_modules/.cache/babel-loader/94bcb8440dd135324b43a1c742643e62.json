{"ast":null,"code":"var _jsxFileName = \"/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport './Login.css';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db } from './firebase';\nimport { Home } from '@material-ui/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n\n  const history = useHistory();\n  const {\n    currentUser,\n    registerUser\n  } = useAuth();\n  const [firstName, setFirstName] = useState();\n  const [lastName, setLastName] = useState();\n  const [userEmail, setUserEmail] = useState();\n  const [userPass, setUserPass] = useState();\n  const [userConfirmPass, setConfirmPass] = useState();\n  const [isAuthError, setIsAuthError] = useState(false);\n  const [authError, setAuthError] = useState(\"\");\n  const customersTable = db.collection(\"customer\"); // const adminTable = db.collection(\"admin\")\n\n  const handleChange = e => {\n    if (e.target.name === \"registerFname\") {\n      setFirstName(e.target.value);\n    } else if (e.target.name === \"registerLname\") {\n      setLastName(e.target.value);\n    } else if (e.target.name === \"registerEmail\") {\n      setUserEmail(e.target.value);\n    } else if (e.target.name === \"registerPass\") {\n      setUserPass(e.target.value);\n    } else if (e.target.name === \"registerConfirmPass\") {\n      setConfirmPass(e.target.value);\n    }\n  };\n\n  const handleRegister = async e => {\n    e.preventDefault();\n\n    if (userPass === userConfirmPass) {\n      try {\n        await registerUser(userEmail, userPass);\n        await customersTable.add({\n          \"fname\": firstName,\n          \"lname\": lastName,\n          \"email\": userEmail,\n          \"pass\": userPass,\n          \"confirmPass\": userConfirmPass\n        });\n        await history.push(\"/\");\n        await setIsAuthError(false);\n      } catch (error) {\n        console.log(\"Registration Error: \", error);\n        setIsAuthError(true);\n        setAuthError(error.message);\n      }\n    } else {\n      setIsAuthError(true);\n      setAuthError(\"Please Ensure Your Password is the same as the Confirm Password\");\n    }\n  };\n\n  console.log(window.pathname);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login_section reg_section\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Customer Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleRegister,\n      className: \"registration_form\",\n      children: [isAuthError ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form_error form_inputs\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"First Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerFname\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Last Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerLname\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Phone Number:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerPhone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"email\",\n        className: \"form_inputs\",\n        name: \"registerEmail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"password\",\n        className: \"form_inputs\",\n        name: \"registerPass\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Confirm Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"password\",\n        className: \"form_inputs\",\n        name: \"registerConfirmPass\",\n        password: \"\",\n        autoComplete: \"new-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"form_btn \",\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login_footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \" Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back_home_div\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this), \"Back Home\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Register, \"f+v8V79G5aoe74Tgfy4Qg7q0C4U=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Register.js"],"names":["React","useState","Link","useHistory","useAuth","db","Home","Register","history","currentUser","registerUser","firstName","setFirstName","lastName","setLastName","userEmail","setUserEmail","userPass","setUserPass","userConfirmPass","setConfirmPass","isAuthError","setIsAuthError","authError","setAuthError","customersTable","collection","handleChange","e","target","name","value","handleRegister","preventDefault","add","push","error","console","log","message","window","pathname"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport './Login.css'\nimport { useAuth } from '../contexts/AuthContext'\nimport { db } from './firebase'\nimport {Home } from '@material-ui/icons';\n\nexport default function Register() {\n\n    const history = useHistory();\n\n    const { currentUser, registerUser } = useAuth(); \n\n    const [firstName, setFirstName] = useState();\n    const [lastName, setLastName] = useState();\n    const [userEmail, setUserEmail] = useState();\n    const [userPass, setUserPass] = useState();\n    const [userConfirmPass, setConfirmPass] = useState();\n\n    const[isAuthError, setIsAuthError] = useState(false);\n    const[authError, setAuthError] = useState(\"\");\n\n\n    const customersTable = db.collection(\"customer\")\n    // const adminTable = db.collection(\"admin\")\n    const handleChange = (e) => {\n        \n        if(e.target.name === \"registerFname\"){\n            setFirstName(e.target.value)\n        }else if (e.target.name === \"registerLname\"){\n            setLastName(e.target.value)\n        }else if (e.target.name === \"registerEmail\"){\n            setUserEmail(e.target.value)\n        }else if(e.target.name === \"registerPass\"){\n            setUserPass(e.target.value)\n        }else if(e.target.name === \"registerConfirmPass\"){\n            setConfirmPass(e.target.value)\n        }\n\n    }\n\n    const handleRegister = async  e => {\n        e.preventDefault();\n        if(userPass === userConfirmPass){\n            try{\n                await registerUser(userEmail, userPass)\n                await customersTable.add({\n                    \"fname\": firstName,\n                    \"lname\": lastName,\n                    \"email\": userEmail,\n                    \"pass\": userPass,\n                    \"confirmPass\": userConfirmPass,\n                    })\n                await history.push(\"/\") \n                await  setIsAuthError(false);\n            }catch(error){\n                console.log(\"Registration Error: \", error)\n                setIsAuthError(true);\n                setAuthError(error.message)\n            }  \n        }else {\n            setIsAuthError(true);\n            setAuthError(\"Please Ensure Your Password is the same as the Confirm Password\")\n        }\n \n    }\n    console.log(window.pathname)\n    return (\n        <section className=\"login_section reg_section\">   \n            <h2>Customer Sign Up</h2>\n\n            <form onSubmit={handleRegister} className=\"registration_form\">\n                {\n                isAuthError ?\n                <div className=\"form_error form_inputs\">\n                    <p>{authError}</p>\n                </div> \n                :\n                <>\n                </>               \n                }\n                \n                <label className=\"form_labels\">First Name:</label>\n                <input onChange={handleChange} type=\"text\" className=\"form_inputs\" name=\"registerFname\" />\n                <label className=\"form_labels\">Last Name:</label>\n                <input onChange={handleChange} type=\"text\" className=\"form_inputs\" name=\"registerLname\" />\n                <label className=\"form_labels\">Phone Number:</label>\n                <input onChange={handleChange} type=\"text\" className=\"form_inputs\" name=\"registerPhone\" /> \n                <label className=\"form_labels\">Email:</label>\n                <input onChange={handleChange} type=\"email\" className=\"form_inputs\" name=\"registerEmail\" />\n                <label className=\"form_labels\">Password:</label>\n                <input onChange={handleChange} type=\"password\" className=\"form_inputs\" name=\"registerPass\" />\n                <label className=\"form_labels\">Confirm Password:</label>\n                <input onChange={handleChange} type=\"password\" className=\"form_inputs\" name=\"registerConfirmPass\" password=\"\" autoComplete=\"new-password\" />\n                \n                <button type=\"submit\" className=\"form_btn \">Sign Up</button>\n            </form>\n            <div className=\"login_footer\">\n                <p>Already have an account?\n                    <Link to=\"/login\"> Sign In</Link>\n                </p>\n                <div className=\"back_home_div\">\n                    <Link to=\"/\">\n                    <Home />Back Home\n                    </Link>\n                </div>\n            </div>\n        </section>        \n    )\n}\n"]},"metadata":{},"sourceType":"module"}