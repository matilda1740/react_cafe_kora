{"ast":null,"code":"var _jsxFileName = \"/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Add, Remove, CreditCard, Archive, DirectionsCar } from '@material-ui/icons';\nimport './Checkout.css';\nimport { useStateValue } from './StateProvider';\nimport { getSubTotal } from './reducer';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db, time } from './firebase';\nimport { getproductTotal } from '../components/reducer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Checkout() {\n  _s();\n\n  const [{\n    cart\n  }, dispatch] = useStateValue();\n  const {\n    currentUser\n  } = useAuth();\n  const orderTable = db.collection(\"order\");\n  const orderDetailsTable = db.collection(\"orderDetails\");\n  const [isPickup, setIsPickup] = useState(false);\n  const [isDelivery, setIsDelivery] = useState(false);\n  const [shipFee, setShipFee] = useState(0);\n\n  const handlePDSelect = selection => e => {\n    if (selection === \"pickup\") {\n      isPickup ? setIsPickup(false) : setIsPickup(true);\n      setIsDelivery(false);\n    } else if (selection === \"delivery\") {\n      isDelivery ? setIsDelivery(false) : setIsDelivery(true);\n      setIsPickup(false);\n    }\n  };\n\n  const handleShipFee = fee => () => {\n    setShipFee(fee);\n  };\n\n  const sendOrderDetails = async () => {\n    if (currentUser) {\n      try {\n        // CREATE ORDER INSTANCE\n        let createOrder = await orderTable.add({\n          \"orderID\": orderTable.doc().id,\n          \"orderTotal\": getSubTotal(cart),\n          \"orderQty\": getproductTotal(cart),\n          \"orderDate\": time,\n          \"customerID\": currentUser.uid\n        });\n\n        if (createOrder) {\n          let currentOrder = await orderTable.doc(createOrder.id).get();\n          console.log(currentOrder.data()); // cart?.forEach( async item => {\n          //     let res = await orderDetailsTable.add({\n          //         \"orderDetailsID\": orderDetailsTable.doc().id,\n          //         \"orderID\": createOrder.doc().id,\n          //         \"itemTotal\": item.quantity * item.product_price,\n          //         \"itemQty\": item.quantity,\n          //         \"productID\": item.product_id\n          //     })  \n          //     // console.log(res)\n          // })     \n          // SUCCESS MESSAGE .... REROUTE TO HOME ...\n        } else {\n          // DISPLAY ERROR MESSAGE\n          console.log(\"Error\");\n        }\n      } catch (error) {\n        console.log(\"Error Sending Order Details:  \", error);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"checkout_page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkout_column\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review_order checkout_column_div\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"1. REVIEW ORDER\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this), (cart === null || cart === void 0 ? void 0 : cart.length) && cart.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product_review_div\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"products_image_div\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"product_img\",\n              src: product.product_image,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"product_title\",\n              children: product.product_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"products_desc_div\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"quantity_controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Add, {\n                className: \"qty_icons\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: product.quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Remove, {\n                className: \"qty_icons\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 37\n              }, this), \"                        \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn_purchase_div\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"product_price\",\n                children: [\"Ksh. \", product.product_price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment_info checkout_column_div\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"2. SELECT SHIPMENT METHOD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment_info_row\",\n          onClick: handlePDSelect(\"pickup\"),\n          children: [/*#__PURE__*/_jsxDEV(Archive, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Pickup\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this), isPickup && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment_info_row\",\n            onClick: handleShipFee(100),\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"CBD Pickup Station\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Ksh. 100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment_info_row\",\n            onClick: handleShipFee(200),\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Stations Within Nairobi, outside CBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Ksh. 200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment_info_row\",\n          onClick: handlePDSelect(\"delivery\"),\n          children: [/*#__PURE__*/_jsxDEV(DirectionsCar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Delivery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }, this), isDelivery && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment_info_row\",\n            onClick: handleShipFee(100),\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Within CBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Ksh. 100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment_info_row\",\n            onClick: handleShipFee(300),\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Within Nairobi, outside CBD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Ksh. 300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"payment_info_row\",\n            onClick: handleShipFee(400),\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Outside Nairobi, in Kenya\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Ksh. 400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order_subtotal checkout_column_div\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"3. SUBTOTAL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order_subtotal_row\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Subtotal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Ksh. \", getSubTotal(cart)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order_subtotal_row\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Shipment Fee\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Ksh. \", shipFee]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"order_subtotal_row\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Order Total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Ksh. \", getSubTotal(cart) + shipFee]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment_info checkout_column_div\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"4. SELECT PAYMENT METHOD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment_info_row\",\n          children: [/*#__PURE__*/_jsxDEV(CreditCard, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Credit Card\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment_info_row\",\n          children: [/*#__PURE__*/_jsxDEV(CreditCard, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Paypal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"payment_info_row\",\n          children: [/*#__PURE__*/_jsxDEV(CreditCard, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Cash on Delivery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendOrderDetails,\n        className: \"form_btn checkout_btn\",\n        children: \"Complete Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Checkout, \"wVyzmYXj7d3MCtG/YP3xqIwnTuU=\", false, function () {\n  return [useStateValue, useAuth];\n});\n\n_c = Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Checkout.js"],"names":["React","useState","Add","Remove","CreditCard","Archive","DirectionsCar","useStateValue","getSubTotal","useAuth","db","time","getproductTotal","Checkout","cart","dispatch","currentUser","orderTable","collection","orderDetailsTable","isPickup","setIsPickup","isDelivery","setIsDelivery","shipFee","setShipFee","handlePDSelect","selection","e","handleShipFee","fee","sendOrderDetails","createOrder","add","doc","id","uid","currentOrder","get","console","log","data","error","length","map","product","product_image","product_name","quantity","product_price"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,GAAT,EAAcC,MAAd,EAAsBC,UAAtB,EAAkCC,OAAlC,EAA2CC,aAA3C,QAAgE,oBAAhE;AAEA,OAAO,gBAAP;AACA,SAASC,aAAT,QAA8B,iBAA9B;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,SAASC,OAAT,QAAwB,yBAAxB;AACA,SAASC,EAAT,EAAcC,IAAd,QAA0B,YAA1B;AACA,SAASC,eAAT,QAAgC,uBAAhC;;;AAEA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AAC/B,QAAM,CAAE;AAACC,IAAAA;AAAD,GAAF,EAAUC,QAAV,IAAsBR,aAAa,EAAzC;AACA,QAAM;AAAES,IAAAA;AAAF,MAAkBP,OAAO,EAA/B;AAEA,QAAMQ,UAAU,GAAGP,EAAE,CAACQ,UAAH,CAAc,OAAd,CAAnB;AACA,QAAMC,iBAAiB,GAAGT,EAAE,CAACQ,UAAH,CAAc,cAAd,CAA1B;AAEA,QAAM,CAAEE,QAAF,EAAYC,WAAZ,IAA2BpB,QAAQ,CAAC,KAAD,CAAzC;AACA,QAAM,CAAEqB,UAAF,EAAcC,aAAd,IAA+BtB,QAAQ,CAAC,KAAD,CAA7C;AACA,QAAM,CAAEuB,OAAF,EAAWC,UAAX,IAAyBxB,QAAQ,CAAC,CAAD,CAAvC;;AAEA,QAAMyB,cAAc,GAAGC,SAAS,IAAKC,CAAD,IAAO;AACvC,QAAGD,SAAS,KAAK,QAAjB,EAA0B;AACtBP,MAAAA,QAAQ,GAAGC,WAAW,CAAC,KAAD,CAAd,GAAwBA,WAAW,CAAC,IAAD,CAA3C;AACAE,MAAAA,aAAa,CAAC,KAAD,CAAb;AACH,KAHD,MAGM,IAAGI,SAAS,KAAK,UAAjB,EAA4B;AAC9BL,MAAAA,UAAU,GAAIC,aAAa,CAAC,KAAD,CAAjB,GAA2BA,aAAa,CAAC,IAAD,CAAlD;AACAF,MAAAA,WAAW,CAAC,KAAD,CAAX;AACH;AACJ,GARD;;AAUA,QAAMQ,aAAa,GAAGC,GAAG,IAAI,MAAM;AAC/BL,IAAAA,UAAU,CAACK,GAAD,CAAV;AACH,GAFD;;AAIA,QAAMC,gBAAgB,GAAG,YAAY;AACjC,QAAGf,WAAH,EAAe;AACX,UAAG;AACC;AACA,YAAIgB,WAAW,GACf,MAAMf,UAAU,CAACgB,GAAX,CAAe;AACjB,qBAAWhB,UAAU,CAACiB,GAAX,GAAiBC,EADX;AAEjB,wBAAc3B,WAAW,CAACM,IAAD,CAFR;AAGjB,sBAAYF,eAAe,CAACE,IAAD,CAHV;AAIjB,uBAAaH,IAJI;AAKjB,wBAAcK,WAAW,CAACoB;AALT,SAAf,CADN;;AAQA,YAAGJ,WAAH,EAAe;AAEX,cAAIK,YAAY,GAAG,MAAMpB,UAAU,CAACiB,GAAX,CAAeF,WAAW,CAACG,EAA3B,EAA+BG,GAA/B,EAAzB;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAYH,YAAY,CAACI,IAAb,EAAZ,EAHW,CAIX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,SAfD,MAeM;AACF;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH;AACJ,OA7BD,CA6BC,OAAME,KAAN,EAAY;AACTH,QAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8CE,KAA9C;AACH;AACR;AACJ,GAnCG;;AAqCA,sBACA;AAAS,IAAA,SAAS,EAAC,eAAnB;AAAA,4BACI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAIQ,CAAA5B,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAE6B,MAAN,KACA7B,IAAI,CAAC8B,GAAL,CAAUC,OAAO,iBACb;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACI;AAAK,YAAA,SAAS,EAAC,oBAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,aAAf;AAA6B,cAAA,GAAG,EAAEA,OAAO,CAACC,aAA1C;AAAyD,cAAA,GAAG,EAAC;AAA7D;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAI,cAAA,SAAS,EAAC,eAAd;AAAA,wBAA+BD,OAAO,CAACE;AAAvC;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,mBAAf;AAAA,sCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAGI,QAAC,GAAD;AAAK,gBAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAA,0BAAIF,OAAO,CAACG;AAAZ;AAAA;AAAA;AAAA;AAAA,sBAJJ,eAKI,QAAC,MAAD;AAAQ,gBAAA,SAAS,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA,sBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAOI;AAAQ,cAAA,SAAS,EAAC,kBAAlB;AAAA,qCACI;AAAG,gBAAA,SAAS,EAAC,eAAb;AAAA,oCAAmCH,OAAO,CAACI,aAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CALR;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eA8BI;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAkC,UAAA,OAAO,EAAEvB,cAAc,CAAC,QAAD,CAAzD;AAAA,kCACI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAOQN,QAAQ,iBACR;AAAA,kCACA;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAkC,YAAA,OAAO,EAAES,aAAa,CAAC,GAAD,CAAxD;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAKA;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAkC,YAAA,OAAO,EAAEA,aAAa,CAAC,GAAD,CAAxD;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBALA;AAAA,wBARR,eAmBI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAkC,UAAA,OAAO,EAAEH,cAAc,CAAC,UAAD,CAAzD;AAAA,kCACI,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnBJ,EAwBQJ,UAAU,iBACV;AAAA,kCACA;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAkC,YAAA,OAAO,EAAEO,aAAa,CAAC,GAAD,CAAxD;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,eAKA;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAkC,YAAA,OAAO,EAAEA,aAAa,CAAC,GAAD,CAAxD;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBALA,eASA;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAkC,YAAA,OAAO,EAAEA,aAAa,CAAC,GAAD,CAAxD;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBATA;AAAA,wBAzBR;AAAA;AAAA;AAAA;AAAA;AAAA,cA9BJ,eAyEI;AAAK,QAAA,SAAS,EAAC,oCAAf;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA,gCAASrB,WAAW,CAACM,IAAD,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAMI;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA,gCAASU,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,eAUI;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA,gCAAShB,WAAW,CAACM,IAAD,CAAX,GAAoBU,OAA7B;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAzEJ,eAyFI;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA,gCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAGI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,kCACI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAQI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,kCACI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBARJ,eAaI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,kCACI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAzFJ,eA4GI;AAAQ,QAAA,OAAO,EAAEO,gBAAjB;AAAmC,QAAA,SAAS,EAAC,uBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA5GJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AA2IH;;GAzMuBlB,Q;UACQN,a,EACJE,O;;;KAFJI,Q","sourcesContent":["import React, { useState } from 'react'\nimport { Add, Remove, CreditCard, Archive, DirectionsCar } from '@material-ui/icons'\n\nimport './Checkout.css'\nimport { useStateValue } from './StateProvider';\nimport { getSubTotal } from './reducer'\nimport { useAuth } from '../contexts/AuthContext';\nimport { db,  time } from './firebase'\nimport { getproductTotal } from '../components/reducer'\n\nexport default function Checkout() {\n    const [ {cart}, dispatch] = useStateValue();\n    const { currentUser } = useAuth(); \n\n    const orderTable = db.collection(\"order\");\n    const orderDetailsTable = db.collection(\"orderDetails\");\n\n    const [ isPickup, setIsPickup] = useState(false);\n    const [ isDelivery, setIsDelivery] = useState(false);\n    const [ shipFee, setShipFee] = useState(0);\n\n    const handlePDSelect = selection => (e) => {\n        if(selection === \"pickup\"){\n            isPickup ? setIsPickup(false) : setIsPickup(true);\n            setIsDelivery(false)\n        }else if(selection === \"delivery\"){\n            isDelivery ?  setIsDelivery(false) : setIsDelivery(true)\n            setIsPickup(false)\n        }\n    }\n\n    const handleShipFee = fee => () => {\n        setShipFee(fee)\n    }\n\n    const sendOrderDetails = async () => {\n        if(currentUser){\n            try{\n                // CREATE ORDER INSTANCE\n                let createOrder = \n                await orderTable.add({\n                    \"orderID\": orderTable.doc().id,\n                    \"orderTotal\": getSubTotal(cart),\n                    \"orderQty\": getproductTotal(cart),\n                    \"orderDate\": time,\n                    \"customerID\": currentUser.uid\n                })\n                if(createOrder){\n                    \n                    let currentOrder = await orderTable.doc(createOrder.id).get()\n                    console.log(currentOrder.data())\n                    // cart?.forEach( async item => {\n                    //     let res = await orderDetailsTable.add({\n                    //         \"orderDetailsID\": orderDetailsTable.doc().id,\n                    //         \"orderID\": createOrder.doc().id,\n                    //         \"itemTotal\": item.quantity * item.product_price,\n                    //         \"itemQty\": item.quantity,\n                    //         \"productID\": item.product_id\n                    //     })  \n                    //     // console.log(res)\n                    // })     \n                    // SUCCESS MESSAGE .... REROUTE TO HOME ...\n                }else {\n                    // DISPLAY ERROR MESSAGE\n                    console.log(\"Error\")\n                }\n            }catch(error){\n                console.log(\"Error Sending Order Details:  \", error)\n            }\n    }\n}\n\n    return (\n    <section className=\"checkout_page\">\n        <div className=\"checkout_column\">\n            <div className=\"review_order checkout_column_div\">\n                <h4>1. REVIEW ORDER</h4>\n                \n                {\n                    cart?.length &&\n                    cart.map( product => (\n                        <div className=\"product_review_div\">\n                            <div className=\"products_image_div\">\n                                <img className=\"product_img\" src={product.product_image} alt=\"\"/>\n                                <h3 className=\"product_title\">{product.product_name}</h3>\n                            </div>\n                            <div className=\"products_desc_div\">\n                                <div className=\"quantity_controls\">\n                                    <p>Quantity</p>\n                        \n                                    <Add className=\"qty_icons\"/>\n                                    <p>{product.quantity}</p>\n                                    <Remove className=\"qty_icons\"/>                        </div>\n                                <button className=\"btn_purchase_div\">\n                                    <p className=\"product_price\">Ksh. {product.product_price}</p>\n                                </button>\n                            </div>\n                    \n                        </div>\n                    ))\n                }\n\n            </div>\n\n            <div className=\"payment_info checkout_column_div\">\n                <h4>2. SELECT SHIPMENT METHOD</h4>\n                <div className=\"payment_info_row\" onClick={handlePDSelect(\"pickup\")}>\n                    <Archive />                       \n                    <p>Pickup</p>\n                </div>\n                {\n                    isPickup &&\n                    <>\n                    <div className=\"payment_info_row\" onClick={handleShipFee(100)}>\n                        <p>CBD Pickup Station</p>\n                        <p>Ksh. 100</p>\n                    </div>\n                    <div className=\"payment_info_row\" onClick={handleShipFee(200)}>\n                        <p>Stations Within Nairobi, outside CBD</p>\n                        <p>Ksh. 200</p>\n                    </div> \n                    </>                                  \n                }\n                <div className=\"payment_info_row\" onClick={handlePDSelect(\"delivery\")}>\n                    <DirectionsCar />\n                    <p>Delivery</p>\n                </div>\n                {\n                    isDelivery &&\n                    <>\n                    <div className=\"payment_info_row\" onClick={handleShipFee(100)}>\n                        <p>Within CBD</p>\n                        <p>Ksh. 100</p>\n                    </div>\n                    <div className=\"payment_info_row\" onClick={handleShipFee(300)}>\n                        <p>Within Nairobi, outside CBD</p>\n                        <p>Ksh. 300</p>\n                    </div>\n                    <div className=\"payment_info_row\" onClick={handleShipFee(400)}>\n                        <p>Outside Nairobi, in Kenya</p>\n                        <p>Ksh. 400</p>\n                    </div>  \n                    </>                                  \n                }\n\n            </div>\n\n            <div className=\"order_subtotal checkout_column_div\">\n                <h4>3. SUBTOTAL</h4>\n                <div className=\"order_subtotal_row\">\n                    <p>Subtotal</p>\n                    <p>Ksh. {getSubTotal(cart)}</p>\n                </div>\n                <div className=\"order_subtotal_row\">\n                    <p>Shipment Fee</p>\n                    <p>Ksh. {shipFee}</p>\n                </div>                \n                <div className=\"order_subtotal_row\">\n                    <p>Order Total</p>\n                    <p>Ksh. {getSubTotal(cart) + shipFee}</p>\n                </div>\n            </div>\n\n            <div className=\"payment_info checkout_column_div\">\n                <h4>4. SELECT PAYMENT METHOD</h4>\n            \n                <div className=\"payment_info_row\">\n                    <CreditCard />\n                    <p>Credit Card</p>\n                </div>\n            \n                <div className=\"payment_info_row\">\n                    <CreditCard />\n                    <p>Paypal</p>\n                </div>\n            \n                <div className=\"payment_info_row\">\n                    <CreditCard />\n                    <p>Cash on Delivery</p>\n                </div>                               \n            </div>\n\n            <button onClick={sendOrderDetails} className=\"form_btn checkout_btn\">Complete Order</button>\n\n{/* \n            <div className=\"delivery_info checkout_column_div\">\n                <h4>5. DELIVERY INFORMATION</h4>\n\n                <form className=\"registration_form\">\n                    <label className=\"form_labels\">First Name:</label>\n                    <input type=\"text\" className=\"form_inputs\" name=\"registerFname\" />\n                    <label className=\"form_labels\">Last Name:</label>\n                    <input type=\"text\" className=\"form_inputs\" name=\"registerLname\" />\n                    <label className=\"form_labels\">Email:</label>\n                    <input type=\"email\" className=\"form_inputs\" name=\"registerEmail\" />\n                    <label className=\"form_labels\">Phone Number:</label>\n                    <input type=\"text\" className=\"form_inputs\" name=\"registerPass\" />\n                    <label className=\"form_labels\">Delivery Address:</label>\n                    <input type=\"text\" className=\"form_inputs\" name=\"registerConfirmPass\" />\n                    <label className=\"form_labels\">Postal Code:</label>\n                    <input type=\"text\" className=\"form_inputs\" name=\"registerConfirmPass\" />  \n                    \n                    <button type=\"submit\" className=\"form_btn \">PAY NOW</button>\n                    \n                </form>\n            </div> */}\n        \n        </div> {/* Closes the Flex Column */}\n    </section>\n\n    )\n}\n"]},"metadata":{},"sourceType":"module"}