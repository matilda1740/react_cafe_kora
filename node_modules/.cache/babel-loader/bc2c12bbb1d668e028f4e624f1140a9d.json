{"ast":null,"code":"var _jsxFileName = \"/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport './Login.css';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db, time } from './firebase';\nimport { Home } from '@material-ui/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n\n  const history = useHistory();\n  const {\n    currentUser,\n    registerUser\n  } = useAuth();\n  const {\n    userDetails,\n    setUserDetails\n  } = useState();\n  const [firstName, setFirstName] = useState();\n  const [lastName, setLastName] = useState();\n  const [userPhone, setUserPhone] = useState();\n  const [userRole, setUserRole] = useState();\n  const [userEmail, setUserEmail] = useState();\n  const [userPass, setUserPass] = useState();\n  const [userConfirmPass, setConfirmPass] = useState();\n  const [isAuthError, setIsAuthError] = useState(false);\n  const [authError, setAuthError] = useState(\"\");\n  const [isAdmin, setIsAdmin] = useState(false);\n  const userTable = db.collection(\"user\");\n\n  const handleChange = input => async e => {\n    e.preventDefault();\n\n    if (e.target.name === \"registerFname\") {\n      setFirstName(e.target.value);\n    } else if (e.target.name === \"registerLname\") {\n      setLastName(e.target.value);\n    } else if (e.target.name === \"registerPhone\") {\n      setUserPhone(e.target.value);\n    } else if (e.target.name === \"registerEmail\") {\n      setUserEmail(e.target.value);\n    } else if (e.target.name === \"registerPass\") {\n      setUserPass(e.target.value);\n    } else if (e.target.name === \"registerConfirmPass\") {\n      setConfirmPass(e.target.value);\n    }\n  };\n\n  const handleRegister = async e => {\n    e.preventDefault();\n\n    if (userPass === userConfirmPass) {\n      try {\n        // console.log(userEmail, userPass)\n        let response = await registerUser(userEmail, userPass);\n\n        if (response) {\n          console.log(response.user); // await userTable.add({\n          // \"userID\": response.uid,\n          // \"fname\": firstName,\n          // \"lname\": lastName,\n          // \"phone\": userPhone,\n          // \"type\" : isAdmin ? \"admin\" : \"customer\",\n          // \"email\": userEmail,\n          // \"pass\": userPass,\n          // \"datejoined\": time\n          // }) \n        }\n\n        console.log(response);\n        (await isAdmin) ? history.push(\"/admin\") : history.push(\"/\");\n        await setIsAuthError(false);\n      } catch (error) {\n        console.log(\"Registration Error: \", error);\n        setIsAuthError(true);\n        setAuthError(error.message);\n      }\n    } else {\n      setIsAuthError(true);\n      setAuthError(\"Please Ensure Your Password is the same as the Confirm Password\");\n    }\n  };\n\n  const checkAdmin = e => {\n    if (e.target.style.backgroundColor === 'rgb(202, 151, 3)') {\n      e.target.style.backgroundColor = '#002147';\n      setIsAdmin(false);\n    } else {\n      e.target.style.backgroundColor = '#ca9703';\n      setIsAdmin(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login_section reg_section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"check_admin\",\n      onClick: checkAdmin,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Are you an admin?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Cafe Kora Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleRegister,\n      className: \"registration_form\",\n      children: [isAuthError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form_error form_inputs\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"First Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"registerFname\"),\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerFname\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Last Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"registerLname\"),\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerLname\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Phone Number:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"registerPhone\"),\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerPhone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form_labels\",\n          children: \"Cafe Kora Role:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"admin_p form_inputs\",\n          children: \"Adminstrator\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"registerEmail\"),\n        type: \"email\",\n        className: \"form_inputs\",\n        name: \"registerEmail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"registerPass\"),\n        type: \"password\",\n        className: \"form_inputs\",\n        name: \"registerPass\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Confirm Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange(\"registerConfirmPass\"),\n        type: \"password\",\n        className: \"form_inputs\",\n        name: \"registerConfirmPass\",\n        password: \"\",\n        autoComplete: \"new-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"form_btn \",\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login_footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \" Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back_home_div\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this), \"Back Home\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Register, \"NI0dVQm7FgKo8jMkHLsTQpXb1IE=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Register.js"],"names":["React","useState","Link","useHistory","useAuth","db","time","Home","Register","history","currentUser","registerUser","userDetails","setUserDetails","firstName","setFirstName","lastName","setLastName","userPhone","setUserPhone","userRole","setUserRole","userEmail","setUserEmail","userPass","setUserPass","userConfirmPass","setConfirmPass","isAuthError","setIsAuthError","authError","setAuthError","isAdmin","setIsAdmin","userTable","collection","handleChange","input","e","preventDefault","target","name","value","handleRegister","response","console","log","user","push","error","message","checkAdmin","style","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport './Login.css'\nimport { useAuth } from '../contexts/AuthContext'\nimport { db,  time } from './firebase'\nimport {Home } from '@material-ui/icons';\n\nexport default function Register() {\n    const history = useHistory();\n\n    const { currentUser, registerUser } = useAuth(); \n\n    const { userDetails, setUserDetails } = useState();\n\n    const [firstName, setFirstName] = useState();\n    const [lastName, setLastName] = useState();\n    const [userPhone, setUserPhone] = useState();\n    const [userRole, setUserRole] = useState();\n    const [userEmail, setUserEmail] = useState();\n    const [userPass, setUserPass] = useState();\n    const [userConfirmPass, setConfirmPass] = useState();\n\n    const [isAuthError, setIsAuthError] = useState(false);\n    const [authError, setAuthError] = useState(\"\");\n\n    const [isAdmin, setIsAdmin] = useState(false);\n\n    const userTable = db.collection(\"user\");\n\n    const handleChange = input => async (e) => {\n        e.preventDefault();\n        \n        if(e.target.name === \"registerFname\"){\n            setFirstName(e.target.value)\n        }else if (e.target.name === \"registerLname\"){\n            setLastName(e.target.value)\n        }else if (e.target.name === \"registerPhone\"){\n            setUserPhone(e.target.value)\n        }else if (e.target.name === \"registerEmail\"){\n            setUserEmail(e.target.value)\n        }else if(e.target.name === \"registerPass\"){\n            setUserPass(e.target.value)\n        }else if(e.target.name === \"registerConfirmPass\"){\n            setConfirmPass(e.target.value)\n        }\n    }\n\n    const handleRegister = async  e => {\n        e.preventDefault();\n        if(userPass === userConfirmPass){\n            try{\n                // console.log(userEmail, userPass)\n                let response = await registerUser(userEmail, userPass)\n                    \n                if(response){\n                    console.log(response.user)\n                    // await userTable.add({\n                    // \"userID\": response.uid,\n                    // \"fname\": firstName,\n                    // \"lname\": lastName,\n                    // \"phone\": userPhone,\n                    // \"type\" : isAdmin ? \"admin\" : \"customer\",\n                    // \"email\": userEmail,\n                    // \"pass\": userPass,\n                    // \"datejoined\": time\n                    // }) \n\n                }\n                \n                console.log(response)\n                await isAdmin ? history.push(\"/admin\") : history.push(\"/\")\n                await  setIsAuthError(false);\n            }catch(error){\n                console.log(\"Registration Error: \", error)\n                setIsAuthError(true);\n                setAuthError(error.message)\n            }\n        }else {\n            setIsAuthError(true);\n            setAuthError(\"Please Ensure Your Password is the same as the Confirm Password\")\n        }\n \n    }\n\n    const checkAdmin = (e) => {\n        if (e.target.style.backgroundColor === 'rgb(202, 151, 3)'){\n            e.target.style.backgroundColor = '#002147'\n            setIsAdmin(false);\n        }\n        else{\n            e.target.style.backgroundColor = '#ca9703'\n            setIsAdmin(true);\n        }\n    }\n\n    return (\n        <section className=\"login_section reg_section\"> \n\n            <div className=\"check_admin\" onClick={checkAdmin}>\n                <p>Are you an admin?</p>\n            </div>\n            <h2>Cafe Kora Sign Up</h2>\n\n            <form onSubmit={handleRegister} className=\"registration_form\">\n                {\n                isAuthError &&\n                <div className=\"form_error form_inputs\">\n                    <p>{authError}</p>\n                </div> \n         \n                }\n                \n                <label className=\"form_labels\">First Name:</label>\n                <input onChange={handleChange(\"registerFname\")} type=\"text\" className=\"form_inputs\" name=\"registerFname\" />\n                <label className=\"form_labels\">Last Name:</label>\n                <input onChange={handleChange(\"registerLname\")} type=\"text\" className=\"form_inputs\" name=\"registerLname\" />\n                <label className=\"form_labels\">Phone Number:</label>\n                <input onChange={handleChange(\"registerPhone\")} type=\"text\" className=\"form_inputs\" name=\"registerPhone\" /> \n                {\n                    isAdmin &&\n                    <>\n                    <label className=\"form_labels\">Cafe Kora Role:</label>\n                    <p className=\"admin_p form_inputs\">Adminstrator</p>\n\n                    {/* <select onChange={handleChange} className=\"form_inputs\" id=\"select_role\">\n                        <option value=\"0\">Select Cafe Kora Admin Role:</option>\n                        <option value=\"Adminstrator\">Adminstrator</option>\n                        <option value=\"Employee\">Employee</option>\n                    </select> */}\n                    </>\n                }\n \n                <label className=\"form_labels\">Email:</label>\n                <input onChange={handleChange(\"registerEmail\")} type=\"email\" className=\"form_inputs\" name=\"registerEmail\" />\n                <label className=\"form_labels\">Password:</label>\n                <input onChange={handleChange(\"registerPass\")} type=\"password\" className=\"form_inputs\" name=\"registerPass\" />\n                <label className=\"form_labels\">Confirm Password:</label>\n                <input onChange={handleChange(\"registerConfirmPass\")} type=\"password\" className=\"form_inputs\" name=\"registerConfirmPass\" password=\"\" autoComplete=\"new-password\" />\n                \n                <button type=\"submit\" className=\"form_btn \">Sign Up</button>\n            </form>\n            <div className=\"login_footer\">\n                <p>Already have an account?\n                    <Link to=\"/login\"> Sign In</Link>\n                </p>\n                <div className=\"back_home_div\">\n                    <Link to=\"/\">\n                    <Home />Back Home\n                    </Link>\n                </div>\n            </div>\n        </section>        \n    )\n}\n"]},"metadata":{},"sourceType":"module"}