{"ast":null,"code":"import { FETCH_USERS } from './types';\nimport { db } from '../components/firebase';\nconst customersRef = db.collection('user');\nconst users = [];\nconst team = [];\nexport const registerUser = newToDo => async dispatch => {//   todosRef.push().set(newToDo);\n};\nexport const deleteUser = deleteId => async dispatch => {//   todosRef.child(completeToDoId).remove();\n};\nexport const displayUser = () => async dispatch => {\n  const snapshot = await customersRef.onSnapshot(snapshot => {\n    snapshot.docs.forEach(user => {\n      // ChECK IF USER EXISTS IN STATE\n      const userExists = users.find(person => person.userID === user.data().userID);\n      const adminExists = team.find(person => person.userID === user.data().userID);\n\n      if (!userExists && !adminExists) {\n        user.data().type === 'customer' ? users.push(user.data()) : user.data().type === 'admin' && team.push(user.data());\n      }\n    });\n  }, error => {\n    console.log(error);\n  });\n  return {\n    type: FETCH_USERS,\n    payload: snapshot\n  };\n};","map":{"version":3,"sources":["/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/actions/entry.js"],"names":["FETCH_USERS","db","customersRef","collection","users","team","registerUser","newToDo","dispatch","deleteUser","deleteId","displayUser","snapshot","onSnapshot","docs","forEach","user","userExists","find","person","userID","data","adminExists","type","push","error","console","log","payload"],"mappings":"AAAA,SAASA,WAAT,QAA4B,SAA5B;AACA,SAASC,EAAT,QAAmB,wBAAnB;AAEA,MAAMC,YAAY,GAAGD,EAAE,CAACE,UAAH,CAAc,MAAd,CAArB;AACI,MAAMC,KAAK,GAAG,EAAd;AACA,MAAMC,IAAI,GAAG,EAAb;AAEJ,OAAO,MAAMC,YAAY,GAAIC,OAAD,IAAa,MAAMC,QAAN,IAAkB,CAC3D;AACC,CAFM;AAIP,OAAO,MAAMC,UAAU,GAAIC,QAAD,IAAc,MAAMF,QAAN,IAAkB,CAC1D;AACC,CAFM;AAIP,OAAO,MAAMG,WAAW,GAAG,MAAM,MAAMH,QAAN,IAAkB;AAC/C,QAAMI,QAAQ,GACd,MAAMV,YAAY,CACbW,UADC,CACWD,QAAD,IAAc;AACtBA,IAAAA,QAAQ,CAACE,IAAT,CAAcC,OAAd,CAAuBC,IAAI,IAAI;AAC3B;AACA,YAAMC,UAAU,GAAGb,KAAK,CAACc,IAAN,CAAYC,MAAM,IAAIA,MAAM,CAACC,MAAP,KAAkBJ,IAAI,CAACK,IAAL,GAAYD,MAApD,CAAnB;AACA,YAAME,WAAW,GAAGjB,IAAI,CAACa,IAAL,CAAWC,MAAM,IAAIA,MAAM,CAACC,MAAP,KAAkBJ,IAAI,CAACK,IAAL,GAAYD,MAAnD,CAApB;;AACA,UAAG,CAACH,UAAD,IAAe,CAACK,WAAnB,EAA+B;AAC3BN,QAAAA,IAAI,CAACK,IAAL,GAAYE,IAAZ,KAAqB,UAArB,GACInB,KAAK,CAACoB,IAAN,CAAWR,IAAI,CAACK,IAAL,EAAX,CADJ,GAGIL,IAAI,CAACK,IAAL,GAAYE,IAAZ,KAAqB,OAArB,IACAlB,IAAI,CAACmB,IAAL,CAAUR,IAAI,CAACK,IAAL,EAAV,CAJJ;AAI2C;AAClD,KAVD;AAYH,GAdC,EAcCI,KAAK,IAAG;AACPC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,GAhBC,CADN;AAkBA,SAAO;AACHF,IAAAA,IAAI,EAAEvB,WADH;AAEH4B,IAAAA,OAAO,EAAEhB;AAFN,GAAP;AAIH,CAvBM","sourcesContent":["import { FETCH_USERS } from './types'\nimport { db } from '../components/firebase'\n\nconst customersRef = db.collection('user')\n    const users = [];\n    const team = [];\n\nexport const registerUser = (newToDo) => async dispatch => {\n//   todosRef.push().set(newToDo);\n};\n\nexport const deleteUser = (deleteId) => async dispatch => {\n//   todosRef.child(completeToDoId).remove();\n};\n\nexport const displayUser = () => async dispatch => {\n    const snapshot = \n    await customersRef\n        .onSnapshot((snapshot) => {\n            snapshot.docs.forEach( user => {\n                // ChECK IF USER EXISTS IN STATE\n                const userExists = users.find( person => person.userID === user.data().userID)  \n                const adminExists = team.find( person => person.userID === user.data().userID)                           \n                if(!userExists && !adminExists){\n                    user.data().type === 'customer' ?\n                        users.push(user.data())\n                        :\n                        user.data().type === 'admin' &&\n                        team.push(user.data())                }\n            })\n            \n        }, error =>{\n            console.log(error)\n        })\n    return {\n        type: FETCH_USERS,\n        payload: snapshot\n    }\n};"]},"metadata":{},"sourceType":"module"}