{"ast":null,"code":"var _jsxFileName = \"/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport './Login.css';\nimport { useAuth } from '../contexts/AuthContext';\nimport { db, time } from './firebase';\nimport { Home } from '@material-ui/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n\n  const history = useHistory();\n  const {\n    currentUser,\n    registerUser\n  } = useAuth();\n  const [firstName, setFirstName] = useState();\n  const [lastName, setLastName] = useState();\n  const [userPhone, setUserPhone] = useState();\n  const [userRole, setUserRole] = useState();\n  const [userEmail, setUserEmail] = useState();\n  const [userPass, setUserPass] = useState();\n  const [userConfirmPass, setConfirmPass] = useState();\n  const [isAuthError, setIsAuthError] = useState(false);\n  const [authError, setAuthError] = useState(\"\");\n  const [isAdmin, setIsAdmin] = useState(false);\n  const customersTable = db.collection(\"customer\");\n  const adminTable = db.collection(\"admin\");\n\n  const handleChange = e => {\n    const selectRole = document.getElementById(\"select_role\");\n\n    if (e.target.name === \"registerFname\") {\n      setFirstName(e.target.value);\n    } else if (e.target.name === \"registerLname\") {\n      setLastName(e.target.value);\n    } else if (e.target.name === \"registerPhone\") {\n      setUserPhone(e.target.value);\n    } else if (e.target.name === \"registerRole\") {\n      console.log(e.target);\n      setUserRole(selectRole.value);\n    } else if (e.target.name === \"registerEmail\") {\n      setUserEmail(e.target.value);\n    } else if (e.target.name === \"registerPass\") {\n      setUserPass(e.target.value);\n    } else if (e.target.name === \"registerConfirmPass\") {\n      setConfirmPass(e.target.value);\n    }\n  };\n\n  const handleRegister = async e => {\n    e.preventDefault();\n\n    if (userPass === userConfirmPass) {\n      if (isAdmin) {\n        try {\n          await registerUser(userEmail, userPass);\n          await adminTable.add({\n            \"fname\": firstName,\n            \"lname\": lastName,\n            \"phone\": userPhone,\n            \"role\": userRole,\n            \"email\": userEmail,\n            \"pass\": userPass,\n            \"datejoined\": time\n          });\n          await history.push(\"/\");\n          await setIsAuthError(false);\n        } catch (error) {\n          console.log(\"Registration Error: \", error);\n          setIsAuthError(true);\n          setAuthError(error.message);\n        }\n      } else {\n        try {\n          await registerUser(userEmail, userPass);\n          await customersTable.add({\n            \"fname\": firstName,\n            \"lname\": lastName,\n            \"phone\": userPhone,\n            \"email\": userEmail,\n            \"pass\": userPass,\n            \"datejoined\": time\n          });\n          await history.push(\"/\");\n          await setIsAuthError(false);\n        } catch (error) {\n          console.log(\"Registration Error: \", error);\n          setIsAuthError(true);\n          setAuthError(error.message);\n        }\n      }\n    } else {\n      setIsAuthError(true);\n      setAuthError(\"Please Ensure Your Password is the same as the Confirm Password\");\n    }\n  };\n\n  const checkAdmin = e => {\n    if (e.target.style.backgroundColor === 'rgb(202, 151, 3)') {\n      e.target.style.backgroundColor = '#002147';\n      setIsAdmin(false);\n    } else {\n      e.target.style.backgroundColor = '#ca9703';\n      setIsAdmin(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login_section reg_section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"check_admin\",\n      onClick: checkAdmin,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Are you an admin?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Cafe Kora Sign Up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleRegister,\n      className: \"registration_form\",\n      children: [isAuthError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form_error form_inputs\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"First Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerFname\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Last Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerLname\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Phone Number:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"text\",\n        className: \"form_inputs\",\n        name: \"registerPhone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form_labels\",\n          children: \"Cafe Kora Role:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"form_inputs\",\n          id: \"select_role\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"0\",\n            children: \"Select Cafe Kora Admin Role:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Adminstrator\",\n            children: \"Adminstrator\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Employee\",\n            children: \"Employee\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"email\",\n        className: \"form_inputs\",\n        name: \"registerEmail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"password\",\n        className: \"form_inputs\",\n        name: \"registerPass\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form_labels\",\n        children: \"Confirm Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: handleChange,\n        type: \"password\",\n        className: \"form_inputs\",\n        name: \"registerConfirmPass\",\n        password: \"\",\n        autoComplete: \"new-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"form_btn \",\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login_footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \" Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"back_home_div\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 21\n          }, this), \"Back Home\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Register, \"GpxpSTMRnvWjg+/IX9s1uR1LjXA=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/matildamwendwa/Documents/Strathmore/Year 2/Web Application Dev/react_semester_project/src/components/Register.js"],"names":["React","useState","Link","useHistory","useAuth","db","time","Home","Register","history","currentUser","registerUser","firstName","setFirstName","lastName","setLastName","userPhone","setUserPhone","userRole","setUserRole","userEmail","setUserEmail","userPass","setUserPass","userConfirmPass","setConfirmPass","isAuthError","setIsAuthError","authError","setAuthError","isAdmin","setIsAdmin","customersTable","collection","adminTable","handleChange","e","selectRole","document","getElementById","target","name","value","console","log","handleRegister","preventDefault","add","push","error","message","checkAdmin","style","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport './Login.css'\nimport { useAuth } from '../contexts/AuthContext'\nimport { db,  time } from './firebase'\nimport {Home } from '@material-ui/icons';\n\nexport default function Register() {\n    const history = useHistory();\n\n    const { currentUser, registerUser } = useAuth(); \n\n    const [firstName, setFirstName] = useState();\n    const [lastName, setLastName] = useState();\n    const [userPhone, setUserPhone] = useState();\n    const [userRole, setUserRole] = useState();\n    const [userEmail, setUserEmail] = useState();\n    const [userPass, setUserPass] = useState();\n    const [userConfirmPass, setConfirmPass] = useState();\n\n    const [isAuthError, setIsAuthError] = useState(false);\n    const [authError, setAuthError] = useState(\"\");\n\n    const [isAdmin, setIsAdmin] = useState(false);\n\n    const customersTable = db.collection(\"customer\")\n    const adminTable = db.collection(\"admin\")\n    \n    const handleChange = (e) => {\n        const selectRole = document.getElementById(\"select_role\")\n        if(e.target.name === \"registerFname\"){\n            setFirstName(e.target.value)\n        }else if (e.target.name === \"registerLname\"){\n            setLastName(e.target.value)\n        }else if (e.target.name === \"registerPhone\"){\n            setUserPhone(e.target.value)\n        }else if (e.target.name === \"registerRole\"){\n            console.log(e.target)\n            setUserRole(selectRole.value)\n        }\n        else if (e.target.name === \"registerEmail\"){\n            setUserEmail(e.target.value)\n        }else if(e.target.name === \"registerPass\"){\n            setUserPass(e.target.value)\n        }else if(e.target.name === \"registerConfirmPass\"){\n            setConfirmPass(e.target.value)\n        }\n\n    }\n\n    const handleRegister = async  e => {\n        e.preventDefault();\n\n        if(userPass === userConfirmPass){\n            if(isAdmin){\n                try{\n                    await registerUser(userEmail, userPass)\n                    await adminTable.add({\n                        \"fname\": firstName,\n                        \"lname\": lastName,\n                        \"phone\": userPhone,\n                        \"role\" : userRole,\n                        \"email\": userEmail,\n                        \"pass\": userPass,\n                        \"datejoined\": time\n                        })\n                    await history.push(\"/\") \n                    await  setIsAuthError(false);\n                }catch(error){\n                    console.log(\"Registration Error: \", error)\n                    setIsAuthError(true);\n                    setAuthError(error.message)\n                } \n            }else{\n                try{\n                    await registerUser(userEmail, userPass)\n                    await customersTable.add({\n                        \"fname\": firstName,\n                        \"lname\": lastName,\n                        \"phone\": userPhone,\n                        \"email\": userEmail,\n                        \"pass\": userPass,\n                        \"datejoined\": time\n                        })\n                    await history.push(\"/\") \n                    await  setIsAuthError(false);\n                }catch(error){\n                    console.log(\"Registration Error: \", error)\n                    setIsAuthError(true);\n                    setAuthError(error.message)\n                }  \n            }\n        }else {\n            setIsAuthError(true);\n            setAuthError(\"Please Ensure Your Password is the same as the Confirm Password\")\n        }\n \n    }\n\n    const checkAdmin = (e) => {\n        if (e.target.style.backgroundColor === 'rgb(202, 151, 3)'){\n            e.target.style.backgroundColor = '#002147'\n            setIsAdmin(false);\n        }\n        else{\n            e.target.style.backgroundColor = '#ca9703'\n            setIsAdmin(true);\n        }\n    }\n\n    return (\n        <section className=\"login_section reg_section\"> \n\n            <div className=\"check_admin\" onClick={checkAdmin}>\n                <p>Are you an admin?</p>\n            </div>\n            <h2>Cafe Kora Sign Up</h2>\n\n            <form onSubmit={handleRegister} className=\"registration_form\">\n                {\n                isAuthError &&\n                <div className=\"form_error form_inputs\">\n                    <p>{authError}</p>\n                </div> \n         \n                }\n                \n                <label className=\"form_labels\">First Name:</label>\n                <input onChange={handleChange} type=\"text\" className=\"form_inputs\" name=\"registerFname\" />\n                <label className=\"form_labels\">Last Name:</label>\n                <input onChange={handleChange} type=\"text\" className=\"form_inputs\" name=\"registerLname\" />\n                <label className=\"form_labels\">Phone Number:</label>\n                <input onChange={handleChange} type=\"text\" className=\"form_inputs\" name=\"registerPhone\" /> \n                {\n                    isAdmin &&\n                    <>\n                <label className=\"form_labels\">Cafe Kora Role:</label>\n                <select className=\"form_inputs\" id=\"select_role\">\n                    <option value=\"0\">Select Cafe Kora Admin Role:</option>\n                    <option value=\"Adminstrator\">Adminstrator</option>\n                    <option value=\"Employee\">Employee</option>\n                </select>\n                </>\n                }\n \n                <label className=\"form_labels\">Email:</label>\n                <input onChange={handleChange} type=\"email\" className=\"form_inputs\" name=\"registerEmail\" />\n                <label className=\"form_labels\">Password:</label>\n                <input onChange={handleChange} type=\"password\" className=\"form_inputs\" name=\"registerPass\" />\n                <label className=\"form_labels\">Confirm Password:</label>\n                <input onChange={handleChange} type=\"password\" className=\"form_inputs\" name=\"registerConfirmPass\" password=\"\" autoComplete=\"new-password\" />\n                \n                <button type=\"submit\" className=\"form_btn \">Sign Up</button>\n            </form>\n            <div className=\"login_footer\">\n                <p>Already have an account?\n                    <Link to=\"/login\"> Sign In</Link>\n                </p>\n                <div className=\"back_home_div\">\n                    <Link to=\"/\">\n                    <Home />Back Home\n                    </Link>\n                </div>\n            </div>\n        </section>        \n    )\n}\n"]},"metadata":{},"sourceType":"module"}